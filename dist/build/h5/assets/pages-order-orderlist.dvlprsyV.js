import{c as e,w as t,p as s,q as r,n as l,m as a,u as i,i as o,o as c,b as d,e as n,f as u,l as p,g as m,F as f,h as g,t as _,j as h,d as y,E as T}from"./index-Dz1Oxr08.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const O=k({data:()=>({currentFilter:"all",orderList:[],allOrders:[],loading:!1,noMore:!1}),onLoad(e){this.loadOrdersFromStorage(),e.type&&(this.currentFilter=e.type,this.filterOrdersByType(e.type))},onShow(){this.loadOrdersFromStorage()},methods:{loadOrdersFromStorage(){const e=i("orderList")||[];console.log("Loading orders from storage:",e),this.allOrders=e,this.orderList=[...e]},initializeSampleOrders(){const e=[{orderNo:"DT202403150001",status:"pending",items:[{id:1,name:"意大利进口羊毛面料",image:"/static/images/products/fabric1.jpg",color:"深灰色",unitPrice:150,length:2,subtotal:300}],totalAmount:300,discount:30,shippingFee:0,finalAmount:270,orderTime:"2024-03-15T10:30:00Z"},{orderNo:"DT202403140002",status:"shipping",items:[{id:2,name:"英国进口哈里斯粗花呢面料",image:"/static/images/products/fabric2.jpg",color:"米色",unitPrice:120,length:3,subtotal:360}],totalAmount:360,discount:36,shippingFee:0,finalAmount:324,orderTime:"2024-03-14T15:45:00Z"},{orderNo:"DT202403130003",status:"completed",items:[{id:3,name:"日本进口棉麻混纺面料",image:"/static/images/products/fabric3.jpg",color:"浅蓝色",unitPrice:80,length:4,subtotal:320}],totalAmount:320,discount:32,shippingFee:0,finalAmount:288,orderTime:"2024-03-13T09:20:00Z"}];a("orderList",e),console.log("Sample orders saved to storage:",e),this.allOrders=e,this.orderList=[...e]},getStatusText:e=>({pending:"待发货",shipping:"待收货",completed:"已完成"}[e]||e),getTotalItems:e=>e.items.reduce(((e,t)=>e+t.length),0),goToOrderDetail(e){l({url:`/pages/order/detail?orderNo=${e.orderNo}`})},viewLogistics(e){l({url:`/pages/order/logistics?orderNo=${e.orderNo}`})},confirmReceive(e){s({title:"提示",content:"确认已收到商品？",success:e=>{e.confirm&&r({title:"确认收货成功",icon:"success"})}})},deleteOrder(e){s({title:"提示",content:"确定要删除该订单吗？",success:e=>{e.confirm&&r({title:"订单已删除",icon:"success"})}})},filterOrdersByType(e){this.currentFilter=e,this.orderList="all"===e?[...this.allOrders]:this.allOrders.filter((t=>t.status===e))}}},[["render",function(s,r,l,a,i,k){const O=n,F=o,b=h,C=T;return c(),e(F,{class:"order-list-page"},{default:t((()=>[d(F,{class:"page-header"},{default:t((()=>[d(O,{class:"header-title"},{default:t((()=>[u("我的订单")])),_:1})])),_:1}),d(F,{class:"status-filter"},{default:t((()=>[d(F,{class:p(["filter-item",{active:"shipping"===i.currentFilter}]),onClick:r[0]||(r[0]=e=>k.filterOrdersByType("shipping"))},{default:t((()=>[u(" 待收货 ")])),_:1},8,["class"]),d(F,{class:p(["filter-item",{active:"pending"===i.currentFilter}]),onClick:r[1]||(r[1]=e=>k.filterOrdersByType("pending"))},{default:t((()=>[u(" 待发货 ")])),_:1},8,["class"]),d(F,{class:p(["filter-item",{active:"completed"===i.currentFilter}]),onClick:r[2]||(r[2]=e=>k.filterOrdersByType("completed"))},{default:t((()=>[u(" 已完成 ")])),_:1},8,["class"]),d(F,{class:p(["filter-item",{active:"all"===i.currentFilter}]),onClick:r[3]||(r[3]=e=>k.filterOrdersByType("all"))},{default:t((()=>[u(" 全部 ")])),_:1},8,["class"])])),_:1}),i.orderList.length>0?(c(),e(F,{key:0,class:"order-list"},{default:t((()=>[(c(!0),m(f,null,g(i.orderList,((s,r)=>(c(),e(F,{class:"order-item",key:r},{default:t((()=>[d(F,{class:"order-header"},{default:t((()=>[d(O,{class:"order-no"},{default:t((()=>[u("订单号："+_(s.orderNo),1)])),_:2},1024),d(O,{class:p(["order-status",s.status])},{default:t((()=>[u(_(k.getStatusText(s.status)),1)])),_:2},1032,["class"])])),_:2},1024),d(F,{class:"order-content",onClick:e=>k.goToOrderDetail(s)},{default:t((()=>[d(F,{class:"product-list"},{default:t((()=>[(c(!0),m(f,null,g(s.items,((s,r)=>(c(),e(F,{class:"product-item",key:r},{default:t((()=>[d(b,{class:"product-image",src:s.image,mode:"aspectFill"},null,8,["src"]),d(F,{class:"product-info"},{default:t((()=>[d(F,{class:"product-name"},{default:t((()=>[u(_(s.name),1)])),_:2},1024),s.color?(c(),e(F,{key:0,class:"product-spec"},{default:t((()=>[u("颜色："+_(s.color),1)])),_:2},1024)):y("",!0),d(F,{class:"product-price"},{default:t((()=>[d(O,{class:"price"},{default:t((()=>[u("¥"+_(s.unitPrice)+"/m",1)])),_:2},1024),d(O,{class:"length"},{default:t((()=>[u("×"+_(s.length)+"m",1)])),_:2},1024),d(O,{class:"subtotal"},{default:t((()=>[u("小计：¥"+_(s.subtotal),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["onClick"]),d(F,{class:"order-footer"},{default:t((()=>[d(F,{class:"order-total"},{default:t((()=>[d(O,null,{default:t((()=>[u("共"+_(k.getTotalItems(s))+"件商品",1)])),_:2},1024),d(O,null,{default:t((()=>[u("实付：")])),_:1}),d(O,{class:"total-price"},{default:t((()=>[u("¥"+_(Number(s.finalAmount).toFixed(2)),1)])),_:2},1024)])),_:2},1024),d(F,{class:"order-actions"},{default:t((()=>["shipping"===s.status?(c(),m(f,{key:0},[d(C,{class:"action-btn",onClick:e=>k.viewLogistics(s)},{default:t((()=>[u("查看物流")])),_:2},1032,["onClick"]),d(C,{class:"action-btn primary",onClick:e=>k.confirmReceive(s)},{default:t((()=>[u("确认收货")])),_:2},1032,["onClick"])],64)):"completed"===s.status?(c(),e(C,{key:1,class:"action-btn",onClick:e=>k.deleteOrder(s)},{default:t((()=>[u("删除订单")])),_:2},1032,["onClick"])):y("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(c(),e(F,{key:1,class:"empty-state"},{default:t((()=>[d(b,{class:"empty-icon",src:"/static/images/empty-order.png",mode:"aspectFit"}),d(O,{class:"empty-text"},{default:t((()=>[u("暂无订单")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-32ddadd7"]]);export{O as default};
