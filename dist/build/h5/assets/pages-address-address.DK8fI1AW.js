import{c as s,w as e,l as a,G as t,H as d,m as l,p as i,q as o,i as r,r as c,o as n,b as f,e as m,f as u,g as h,F as p,h as _,d as D,t as g,j as y,I as k,J as L,D as v,K as C,E as A}from"./index-oiMriBxI.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=F({data:()=>({addressList:[],isEdit:!1,editIndex:-1,formData:{name:"",phone:"",province:"",city:"",district:"",detail:"",isDefault:!1}}),onShow(){this.loadAddressList()},methods:{loadAddressList(){let s=o("addressList");s&&0!==s.length||(s=[{name:"张三",phone:"13800138000",province:"广东省",city:"深圳市",district:"南山区",detail:"科技园南区科苑路1号",isDefault:!0}],a("addressList",s)),this.addressList=s},showAddressForm(){this.isEdit=!1,this.editIndex=-1,this.formData={name:"",phone:"",province:"",city:"",district:"",detail:"",isDefault:!1},this.$refs.addressForm.open()},editAddress(s,e){this.isEdit=!0,this.editIndex=e,this.formData={...s},this.$refs.addressForm.open()},closeForm(){this.$refs.addressForm.close()},handleRegionChange(s){const[e,a,t]=s.detail.value;this.formData.province=e,this.formData.city=a,this.formData.district=t},handleDefaultChange(s){this.formData.isDefault=s.detail.value},validateForm(){return this.formData.name?this.formData.phone&&/^1\d{10}$/.test(this.formData.phone)?this.formData.province&&this.formData.city&&this.formData.district?!!this.formData.detail||(i({title:"请输入详细地址",icon:"none"}),!1):(i({title:"请选择所在地区",icon:"none"}),!1):(i({title:"请输入正确的手机号码",icon:"none"}),!1):(i({title:"请输入收货人姓名",icon:"none"}),!1)},saveAddress(){this.validateForm()&&(this.formData.isDefault&&this.addressList.forEach((s=>s.isDefault=!1)),this.isEdit?this.addressList[this.editIndex]={...this.formData}:this.addressList.push({...this.formData}),1===this.addressList.length&&(this.addressList[0].isDefault=!0),a("addressList",this.addressList),i({title:this.isEdit?"地址修改成功":"地址添加成功",icon:"success"}),this.closeForm())},deleteAddress(s){l({title:"提示",content:"确定要删除该地址吗？",success:e=>{if(e.confirm){const e=this.addressList[s].isDefault;this.addressList.splice(s,1),e&&this.addressList.length>0&&(this.addressList[0].isDefault=!0),a("addressList",this.addressList),i({title:"删除成功",icon:"success"})}}})},selectAddress(s){a("selectedAddress",s),t("addressSelected",s),d()}},computed:{}},[["render",function(a,t,d,l,i,o){const F=m,b=r,x=y,V=k,E=L,I=v,w=C,$=A,j=c("uni-popup");return n(),s(b,{class:"address-page"},{default:e((()=>[f(b,{class:"page-header"},{default:e((()=>[f(F,{class:"header-title"},{default:e((()=>[u("收货地址")])),_:1})])),_:1}),i.addressList.length>0?(n(),s(b,{key:0,class:"address-list"},{default:e((()=>[(n(!0),h(p,null,_(i.addressList,((a,t)=>(n(),s(b,{class:"address-item",key:t},{default:e((()=>[f(b,{class:"address-info",onClick:s=>o.selectAddress(a)},{default:e((()=>[f(b,{class:"user-info"},{default:e((()=>[f(F,{class:"name"},{default:e((()=>[u(g(a.name),1)])),_:2},1024),f(F,{class:"phone"},{default:e((()=>[u(g(a.phone),1)])),_:2},1024),a.isDefault?(n(),s(F,{key:0,class:"default-tag"},{default:e((()=>[u("默认")])),_:1})):D("",!0)])),_:2},1024),f(b,{class:"address-detail"},{default:e((()=>[u(g(a.province)+g(a.city)+g(a.district)+g(a.detail),1)])),_:2},1024)])),_:2},1032,["onClick"]),f(b,{class:"address-actions"},{default:e((()=>[f(b,{class:"action-item",onClick:s=>o.editAddress(a,t)},{default:e((()=>[f(F,{class:"iconfont"},{default:e((()=>[u("✎")])),_:1}),f(F,null,{default:e((()=>[u("编辑")])),_:1})])),_:2},1032,["onClick"]),f(b,{class:"action-item",onClick:s=>o.deleteAddress(t)},{default:e((()=>[f(F,{class:"iconfont"},{default:e((()=>[u("×")])),_:1}),f(F,null,{default:e((()=>[u("删除")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(n(),s(b,{key:1,class:"empty-state"},{default:e((()=>[f(x,{class:"empty-icon",src:"/static/images/empty-address.png",mode:"aspectFit"}),f(F,{class:"empty-text"},{default:e((()=>[u("暂无收货地址")])),_:1})])),_:1})),f(b,{class:"add-address safe-area-bottom",onClick:o.showAddressForm},{default:e((()=>[f(F,{class:"iconfont"},{default:e((()=>[u("+")])),_:1}),f(F,null,{default:e((()=>[u("新增收货地址")])),_:1})])),_:1},8,["onClick"]),f(j,{ref:"addressForm",type:"bottom"},{default:e((()=>[f(b,{class:"form-popup"},{default:e((()=>[f(b,{class:"form-header"},{default:e((()=>[f(F,{class:"title"},{default:e((()=>[u(g(i.isEdit?"编辑地址":"新增地址"),1)])),_:1}),f(F,{class:"close",onClick:o.closeForm},{default:e((()=>[u("×")])),_:1},8,["onClick"])])),_:1}),f(b,{class:"form-content"},{default:e((()=>[f(b,{class:"form-item"},{default:e((()=>[f(F,{class:"label"},{default:e((()=>[u("收货人")])),_:1}),f(V,{type:"text",modelValue:i.formData.name,"onUpdate:modelValue":t[0]||(t[0]=s=>i.formData.name=s),placeholder:"请输入收货人姓名"},null,8,["modelValue"])])),_:1}),f(b,{class:"form-item"},{default:e((()=>[f(F,{class:"label"},{default:e((()=>[u("手机号码")])),_:1}),f(V,{type:"number",modelValue:i.formData.phone,"onUpdate:modelValue":t[1]||(t[1]=s=>i.formData.phone=s),placeholder:"请输入手机号码",maxlength:"11"},null,8,["modelValue"])])),_:1}),f(b,{class:"form-item"},{default:e((()=>[f(F,{class:"label"},{default:e((()=>[u("所在地区")])),_:1}),f(E,{mode:"region",onChange:o.handleRegionChange,value:[i.formData.province,i.formData.city,i.formData.district]},{default:e((()=>[f(b,{class:"picker-value"},{default:e((()=>[i.formData.province||i.formData.city||i.formData.district?(n(),s(F,{key:0},{default:e((()=>[u(g(i.formData.province)+" "+g(i.formData.city)+" "+g(i.formData.district),1)])),_:1})):(n(),s(F,{key:1,class:"placeholder"},{default:e((()=>[u("请选择省市区")])),_:1}))])),_:1})])),_:1},8,["onChange","value"])])),_:1}),f(b,{class:"form-item"},{default:e((()=>[f(F,{class:"label"},{default:e((()=>[u("详细地址")])),_:1}),f(I,{modelValue:i.formData.detail,"onUpdate:modelValue":t[2]||(t[2]=s=>i.formData.detail=s),placeholder:"请输入详细地址，如街道、门牌号等"},null,8,["modelValue"])])),_:1}),f(b,{class:"form-item switch-item"},{default:e((()=>[f(F,{class:"label"},{default:e((()=>[u("设为默认地址")])),_:1}),f(w,{checked:i.formData.isDefault,onChange:o.handleDefaultChange,color:"#333"},null,8,["checked","onChange"])])),_:1})])),_:1}),f(b,{class:"form-footer"},{default:e((()=>[f($,{class:"submit-btn",onClick:o.saveAddress},{default:e((()=>[u("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},512)])),_:1})}],["__scopeId","data-v-2388a5b9"]]);export{b as default};
