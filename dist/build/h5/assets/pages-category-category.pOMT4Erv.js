import{n as a,i as e,k as t}from"./index-Clh3_Y42.js";import{P as i,S as s}from"./index.asAdP7JP.js";import{a6 as o,ac as d,aT as r,a7 as c,N as l,aO as n,al as m,ai as u,aW as p,_ as h,aV as g,aU as f}from"./vendor.BqSpu6Cs.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=y({components:{SearchBar:s,ProductCard:i},data:()=>({filterTabs:[{name:"综合",type:"all"},{name:"价格",type:"price"},{name:"销量",type:"sales"},{name:"推荐",type:"recommend"}],activeTabIndex:0,categoryList:[{id:0,name:"全部"},{id:1,name:"套装/裤子"},{id:2,name:"上衣"},{id:3,name:"衬衫"},{id:4,name:"马甲"},{id:5,name:"大衣"},{id:6,name:"休闲夹克/风衣"},{id:7,name:"休闲裤"},{id:8,name:"针织"}],activeCategoryIndex:0,productList:[],page:1,loading:!1,noMore:!1,keyword:""}),onLoad(a){if(a.id){const e=this.categoryList.findIndex((e=>e.id===parseInt(a.id)));-1!==e&&(this.activeCategoryIndex=e)}this.loadProducts()},methods:{handleSearch(a){this.keyword=a,this.page=1,this.productList=[],this.noMore=!1,this.loadProducts()},handleTabClick(a){this.activeTabIndex!==a&&(this.activeTabIndex=a,this.page=1,this.productList=[],this.noMore=!1,this.loadProducts())},handleCategoryClick(a){this.activeCategoryIndex!==a&&(this.activeCategoryIndex=a,this.page=1,this.productList=[],this.noMore=!1,this.loadProducts())},handleProductClick(e){a({url:`/pages/product/detail?id=${e.id}`})},loadMore(){this.loading||this.noMore||(this.page++,this.loadProducts())},loadProducts(){this.loading||(this.loading=!0,setTimeout((()=>{const a=[{id:1,image:"/static/images/products/fabric1.jpg",name:"意大利进口羊毛面料 精选VBC面料",memberPrice:100,price:128},{id:2,image:"/static/images/products/fabric2.jpg",name:"英国进口哈里斯粗花呢面料",memberPrice:120,price:150},{id:3,image:"/static/images/products/fabric3.jpg",name:"日本进口棉麻混纺面料",memberPrice:80,price:98},{id:4,image:"/static/images/products/fabric4.jpg",name:"意大利进口真丝面料",memberPrice:200,price:258}];this.page>=3?this.noMore=!0:this.productList=[...this.productList,...a],this.loading=!1}),800))}}},[["render",function(a,i,s,y,C,k){const b=r("search-bar"),_=e,v=t,x=r("product-card");return c(),o(_,{class:"category-page"},{default:d((()=>[l(b,{placeholder:"搜索面料",onSearch:k.handleSearch},null,8,["onSearch"]),l(_,{class:"filter-tabs"},{default:d((()=>[(c(!0),n(m,null,u(C.filterTabs,((a,e)=>(c(),o(_,{key:e,class:p(["tab-item",{active:C.activeTabIndex===e}]),onClick:a=>k.handleTabClick(e)},{default:d((()=>[h(g(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),l(_,{class:"content"},{default:d((()=>[l(v,{"scroll-y":"",class:"category-menu"},{default:d((()=>[(c(!0),n(m,null,u(C.categoryList,((a,e)=>(c(),o(_,{key:e,class:p(["menu-item",{active:C.activeCategoryIndex===e}]),onClick:a=>k.handleCategoryClick(e)},{default:d((()=>[h(g(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),l(v,{"scroll-y":"",class:"product-list",onScrolltolower:k.loadMore},{default:d((()=>[l(_,{class:"grid-container"},{default:d((()=>[(c(!0),n(m,null,u(C.productList,((a,e)=>(c(),o(_,{class:"grid-item",key:e},{default:d((()=>[l(x,{product:a,onClick:e=>k.handleProductClick(a)},null,8,["product","onClick"])])),_:2},1024)))),128))])),_:1}),C.loading?(c(),o(_,{key:0,class:"loading"},{default:d((()=>[h("加载中...")])),_:1})):f("",!0),C.noMore?(c(),o(_,{key:1,class:"no-more"},{default:d((()=>[h("没有更多了")])),_:1})):f("",!0)])),_:1},8,["onScrolltolower"])])),_:1})])),_:1})}],["__scopeId","data-v-ed817f31"]]);export{C as default};
